---
title: "仮想マシン作成:UTokyo Azure 利用例"
---

## 概要

本サービスで多く利用されると思われる，仮想マシン（Azure のサービス名はVirtual Machines）の作成手順の一例です．

## サービスを選択する

- [Azure portal](https://potral.azure.com/)にUTokyo Accountでログインし、Azureサービスの一覧の中から「Virtual Machines」を選択する。
    - 一覧に無い場合、一覧の右にある「その他のサービス」を選択、左側にあるリストから「コンピューティング」を選択すると，右側に表示されるメイン画面の「Infrastructure as a Service(IaaS)」の中にあります．
- Virtual Machines のメインページが表示されたら，「＋作成」をクリックします．
- 選択肢が出てきますが，以下は「Azure仮想マシン」を選択したものとして進めます．

## 仮想マシンを構成する

仮想マシンの構成を指定します。

### 基本パート

#### プロジェクトの詳細

- **サブスクリプション**：事前に申請したサブスクリプションがすでに設定されています．
- **リソースグループ**：仮想マシンはリソース毎に管理されるため，同じポリシーで構成されるリソースはリソースグループで一括管理します．わかりやすい名称を入力してください．

#### インスタンスの詳細

- **仮想マシン名**：Azure Portal 内で管理される仮想マシン名称です．わかりやすい名称を入力してくだささい．
- **リージョン**：仮想マシンをどの地域にあるデータセンターにデプロイするかを指定します．特段の理由がなければJapan EastやJapan Westを選択ください．
- **可用性オプション**：希望する冗長構成を選択してください．
- **ゾーンオプション**：基本は自己選択ゾーンで問題ありません．
- **可用性ゾーン**：複数のゾーンに仮想マシンの冗長機を構成したい場合はどのゾーンに構成するかを選択ください．
- **セキュリティの種類**：ご自身の用途に応じて，セキュリティレベルを選択してください．
- **イメージ**：デプロイしたいＯＳを選択してください．
- **VMアーキテクチャ**：x86かARMを選択できます．特段の理由がなければx86を選択いただくのが無難です．
- **Azure Spot 割引で実行する**：利用頻度が減った時にAzureから資源の回収対象となり、停止や削除をされる可能性があるかわりに割安になります．止められたくない場合はチェックは入れないでください．チェックを入れると回収対象になった場合の挙動を選択できます．
- **サイズ**：CPUコア数やメモリ量などの組み合わせを選択します．
- **休止状態を有効にする**：選択可能な場合に休止状態を有効にしたい場合はチェックを入れてください．

#### 管理者アカウント

- **認証の種類**:：仮想マシンへのリモートログインをパスワード認証で行うか公開鍵認証で行うかを選択します．公開鍵認証ができないシステムからの自動ログインに組み込む等のやむを得ない理由がない限りは，セキュリティ上公開鍵認証を選択してください．
- **ユーザー名**：初期ログイン用のアカウント名を指定します．azureuser が初期状態で入力されていますので，必要に応じて変更してください．
- **SSH公開キーのソース**：既に持っている鍵ペアがある場合は、それを利用することも可能です．通常は新しいキーの組の生成を選択してください．
- **SSHキーの種類**：RSAかEd25519を選択できます．一般的にはEd25519の方が安全性が高いとされますが、古いシステムではRSAしか対応していない場合もあるため、そういったシステムとの連携を検討している場合はRSAを選択ください．
- **キーの組名**：作成されたSSH鍵ペアは，Azure Portal のリソースグループ内に鍵リソースとして保管されるので，そのリソース名となります．初期状態では「仮想マシン名\_key」が入力されているのでそのままで問題ありません．

#### 受信ポートの規則

- **パブリック受信ポート**：初期アクセス用にリモートからのアクセスを許可するかどうかを選択します．なしを選んだ場合は、Azure Portal内からアクセスします．
- **受信ポートを選択**：前項で「選択したポートを許可する」を選択した場合，ssh,https,http の３つのポートのどれを許可するかを選択します．

### ディスクパート
